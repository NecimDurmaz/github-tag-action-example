#!/bin/bash

# Commit mesajÄ± dosyasÄ±nÄ± oku
COMMIT_MSG_FILE="$1"
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Conventional Commit formatÄ±na uygun Regex deseni
PATTERN="^(feat|fix|build|chore|ci|docs|style|refactor|perf|test)(\([\w\-]+\))?(!)?: .+"

# Commit mesajÄ± regex pattern'e uymuyorsa hata ver
if [[ ! "$COMMIT_MSG" =~ $PATTERN ]]; then
    echo  "\nâŒ HATA: Commit mesajÄ± Conventional Commits formatÄ±na uygun deÄŸil!"
    echo  "âœ… DoÄŸru format Ã¶rnekleri:"
    echo  "   - feat: add new login feature"
    echo  "   - fix(parser): resolve parsing bug"
    echo  "   - feat(core)!: update authentication flow"
    echo  "   - docs: update API documentation"
    echo  "   - refactor!: major refactor in database structure"
    echo  "\nğŸ” Daha fazla bilgi iÃ§in: https://www.conventionalcommits.org/en/v1.0.0/"
    exit 1
fi

# BaÅŸarÄ±lÄ± ise commit iÅŸlemi devam etsin
exit 0